{% extends 'az.html' %}

{% block title %}Productos Laborales{% endblock %}

{% block content %}

<style>
  .text-truncate-cell{
    max-width: 200px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
</style>

<div class="card shadow-sm border-0">
  <div class="card-header bg-white d-flex justify-content-between align-items-center">
    <div>
      <h3 class="mb-0">Productos Laborales</h3>
      <small class="text-muted">Listado de productos laborales registrados</small>
    </div>

    {% if request.user.is_authenticated and request.user.is_staff %}
      <a href="{% url 'producto_laboral_create' %}" class="btn btn-dark btn-sm">
        ‚ûï Nuevo Producto Laboral
      </a>
    {% endif %}
  </div>

  <div class="card-body">
    <div class="table-responsive">

      <table class="table table-sm table-striped table-hover align-middle mb-0">
        <thead class="table-dark">
          <tr>
            {% if request.user.is_authenticated and request.user.is_staff %}
              <th class="text-nowrap">ID</th>
            {% endif %}
            <th class="text-nowrap">Nombre</th>
            <th class="text-nowrap">Fecha</th>
            <th class="text-nowrap">Descripci√≥n</th>

            {% if request.user.is_authenticated and request.user.is_staff %}
              <th class="text-end text-nowrap">Acciones</th>
            {% endif %}
          </tr>
        </thead>

        <tbody>
          {% for p in productos %}
          <tr>

            {% if request.user.is_authenticated and request.user.is_staff %}
              <td class="text-muted">{{ p.idproductoslaborales }}</td>
            {% endif %}

            <td class="fw-semibold text-nowrap">{{ p.nombreproducto }}</td>

            <td class="text-nowrap">
              {{ p.fechaproducto|date:"d M, Y" }}
            </td>

            <td class="text-truncate-cell" title="{{ p.descripcion }}">
              {{ p.descripcion }}
            </td>

            {% if request.user.is_authenticated and request.user.is_staff %}
            <td class="text-end text-nowrap">
              <a href="{% url 'producto_laboral_update' p.pk %}" class="btn btn-warning btn-sm">‚úèÔ∏è</a>
              <a href="{% url 'producto_laboral_delete' p.pk %}" class="btn btn-danger btn-sm">üóëÔ∏è</a>
            </td>
            {% endif %}
          </tr>

          {% empty %}
          <tr>
            <td colspan="5" class="text-center text-muted py-4">
              No hay productos laborales registrados
            </td>
          </tr>
          {% endfor %}
        </tbody>

      </table>

    </div>
  </div>

</div>

{% endblock %}
