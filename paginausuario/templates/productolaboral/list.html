{% extends 'az.html' %}
{% block title %}Productos Laborales{% endblock %}

{% block content %}

<style>
  :root{
    --ink:#0b1324;
    --muted:#64748b;
    --line: rgba(2, 32, 71, .10);
    --shadow: 0 10px 28px rgba(2, 32, 71, .10);
    --shadow2: 0 14px 34px rgba(2, 32, 71, .14);
  }

  .pl-surface{
    border-radius: 18px;
    padding: 14px;
    background: radial-gradient(900px 260px at 10% 0%,
      rgba(37,99,235,.12) 0%,
      rgba(37,99,235,0) 60%),
    radial-gradient(900px 260px at 90% 10%,
      rgba(14,165,233,.10) 0%,
      rgba(14,165,233,0) 60%);
  }

  .pl-header{
    border: 1px solid var(--line);
    border-radius: 18px;
    overflow:hidden;
    background: linear-gradient(90deg, rgba(37,99,235,.12) 0%, rgba(14,165,233,.08) 100%);
    box-shadow: var(--shadow);
  }

  .pl-card{
    border: 1px solid var(--line);
    background: linear-gradient(180deg, rgba(255,255,255,.98) 0%, rgba(248,250,252,1) 100%);
    border-radius: 18px;
    padding: 18px;
    box-shadow: var(--shadow);
    transition: transform .15s ease, box-shadow .15s ease, border-color .15s ease;
    position: relative;
    overflow: hidden;
  }
  .pl-card:hover{
    transform: translateY(-2px);
    box-shadow: var(--shadow2);
    border-color: rgba(37,99,235,.22);
  }

  /* Halo suave para diferenciar tarjetas */
  .pl-card::before{
    content:"";
    position:absolute;
    inset:-60px -60px auto auto;
    width:220px; height:220px;
    background: radial-gradient(circle at center, rgba(37,99,235,.14), rgba(37,99,235,0) 60%);
    pointer-events:none;
    transform: rotate(15deg);
  }
  .pl-card:nth-child(2n)::before{
    background: radial-gradient(circle at center, rgba(14,165,233,.14), rgba(14,165,233,0) 60%);
  }

  .pl-title{
    font-size: 1.15rem;
    font-weight: 900;
    color: var(--ink);
    line-height: 1.2;
  }

  .pl-muted{
    font-size: .93rem;
    color: var(--muted);
  }

  .badge-soft{
    background: rgba(2, 32, 71, .06);
    color: var(--ink);
    font-weight: 800;
    border-radius: 999px;
    padding: .35rem .7rem;
    font-size: .8rem;
    border: 1px solid rgba(2, 32, 71, .08);
    display: inline-flex;
    align-items: center;
    gap: .35rem;
  }

  .section-title{
    font-size: .82rem;
    font-weight: 900;
    text-transform: uppercase;
    letter-spacing: .04em;
    color: rgba(2, 32, 71, .78);
    margin-top: 12px;
    margin-bottom: 4px;
  }

  .text-block{
    font-size: .95rem;
    color: #0f172a;
    line-height: 1.55;
    white-space: normal;
    overflow-wrap: anywhere;
    word-break: break-word;
  }

  .pl-actions .btn{
    border-radius: 10px;
    padding: .25rem .6rem;
    font-size: .85rem;
  }
</style>

<div class="pl-surface">

  <!-- HEADER -->
  <div class="pl-header mb-4">
    <div class="p-3 p-md-4 d-flex justify-content-between align-items-center flex-wrap gap-2">
      <div>
        <h3 class="mb-0" style="color:var(--ink);">Productos Laborales</h3>
        <small class="text-muted">Listado profesional de productos laborales</small>
      </div>

      <div class="d-flex align-items-center gap-2 flex-wrap">
        <span class="badge-soft">Total: {{ productos|length }}</span>

        {% if request.user.is_authenticated and request.user.is_staff %}
          <a href="{% url 'producto_laboral_create' %}" class="btn btn-dark btn-sm">
            ‚ûï Nuevo Producto Laboral
          </a>
        {% endif %}
      </div>
    </div>
  </div>

  <!-- LISTADO -->
  {% if productos %}
    <div class="d-grid gap-3">
      {% for p in productos %}
        <div class="pl-card">

          <!-- Encabezado -->
          <div class="d-flex justify-content-between align-items-start flex-wrap gap-2">
            <div>
              <div class="pl-title">{{ p.nombreproducto|default:"‚Äî" }}</div>

              <div class="mt-2">
                {% if p.fechaproducto %}
                  <span class="badge-soft">üìÖ {{ p.fechaproducto|date:"d M Y" }}</span>
                {% else %}
                  <span class="badge-soft">üìÖ Sin fecha</span>
                {% endif %}
              </div>
            </div>

            {% if request.user.is_authenticated and request.user.is_staff %}
              <div class="pl-actions d-flex gap-2">
                <a href="{% url 'producto_laboral_update' p.pk %}" class="btn btn-warning btn-sm">‚úèÔ∏è Editar</a>
                <a href="{% url 'producto_laboral_delete' p.pk %}" class="btn btn-danger btn-sm">üóëÔ∏è Eliminar</a>
              </div>
            {% endif %}
          </div>

          <!-- Descripci√≥n -->
          <div class="section-title">Descripci√≥n</div>
          <div class="text-block">{{ p.descripcion|default:"‚Äî" }}</div>

          {% if request.user.is_authenticated and request.user.is_staff %}
            <div class="pl-muted mt-3">
              <strong>ID:</strong> {{ p.idproductoslaborales }}
            </div>
          {% endif %}
        </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="alert alert-secondary text-center">
      No hay productos laborales registrados.
    </div>
  {% endif %}

</div>

{% endblock %}
