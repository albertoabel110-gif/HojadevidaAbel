{% extends 'az.html' %}
{% block title %}Reconocimientos{% endblock %}

{% block content %}

<style>
  :root{
    --ink:#0b1324;
    --muted:#64748b;
    --line: rgba(2, 32, 71, .10);
    --shadow: 0 10px 28px rgba(2, 32, 71, .10);
    --shadow2: 0 14px 34px rgba(2, 32, 71, .14);
  }

  .rec-surface{
    border-radius: 18px;
    padding: 14px;
    background: radial-gradient(900px 260px at 10% 0%,
      rgba(37,99,235,.12) 0%,
      rgba(37,99,235,0) 60%),
    radial-gradient(900px 260px at 90% 10%,
      rgba(14,165,233,.10) 0%,
      rgba(14,165,233,0) 60%);
  }

  .rec-header{
    border: 1px solid var(--line);
    border-radius: 18px;
    overflow:hidden;
    background: linear-gradient(90deg, rgba(37,99,235,.12) 0%, rgba(14,165,233,.08) 100%);
    box-shadow: var(--shadow);
  }

  .rec-card{
    border: 1px solid var(--line);
    background: linear-gradient(180deg, rgba(255,255,255,.98) 0%, rgba(248,250,252,1) 100%);
    border-radius: 18px;
    padding: 18px;
    box-shadow: var(--shadow);
    transition: transform .15s ease, box-shadow .15s ease, border-color .15s ease;
    position: relative;
    overflow: hidden;
  }
  .rec-card:hover{
    transform: translateY(-2px);
    box-shadow: var(--shadow2);
    border-color: rgba(37,99,235,.22);
  }

  /* Halo suave alternado */
  .rec-card::before{
    content:"";
    position:absolute;
    inset:-60px -60px auto auto;
    width:220px; height:220px;
    background: radial-gradient(circle at center, rgba(37,99,235,.14), rgba(37,99,235,0) 60%);
    pointer-events:none;
    transform: rotate(15deg);
  }
  .rec-card:nth-child(2n)::before{
    background: radial-gradient(circle at center, rgba(14,165,233,.14), rgba(14,165,233,0) 60%);
  }

  .rec-title{
    font-size: 1.12rem;
    font-weight: 900;
    color: var(--ink);
    line-height: 1.2;
  }

  .badge-soft{
    background: rgba(2, 32, 71, .06);
    color: var(--ink);
    font-weight: 800;
    border-radius: 999px;
    padding: .35rem .7rem;
    font-size: .8rem;
    border: 1px solid rgba(2, 32, 71, .08);
    display: inline-flex;
    align-items: center;
    gap: .35rem;
  }

  /* Chips por tipo */
  .chip-academico{
    background: rgba(37,99,235,.12);
    border: 1px solid rgba(37,99,235,.22);
    color: #0b3ea8;
  }
  .chip-publico{
    background: rgba(25,135,84,.12);
    border: 1px solid rgba(25,135,84,.22);
    color: #0f5132;
  }
  .chip-privado{
    background: rgba(245,158,11,.16);
    border: 1px solid rgba(245,158,11,.26);
    color: #7a4b00;
  }

  .section-title{
    font-size: .82rem;
    font-weight: 900;
    text-transform: uppercase;
    letter-spacing: .04em;
    color: rgba(2, 32, 71, .78);
    margin-top: 12px;
    margin-bottom: 4px;
  }

  .text-block{
    font-size: .95rem;
    color: #0f172a;
    line-height: 1.55;
    white-space: normal;
    overflow-wrap: anywhere;
    word-break: break-word;
  }

  .rec-actions .btn{
    border-radius: 10px;
    padding: .25rem .6rem;
    font-size: .85rem;
  }

  .mini-line{
    height: 1px;
    background: rgba(2, 32, 71, .08);
    margin: 12px 0;
  }
</style>

<div class="rec-surface">

  <!-- HEADER -->
  <div class="rec-header mb-4">
    <div class="p-3 p-md-4 d-flex justify-content-between align-items-center flex-wrap gap-2">
      <div>
        <h3 class="mb-0" style="color:var(--ink);">Reconocimientos</h3>
        <small class="text-muted">Listado profesional de reconocimientos</small>
      </div>

      <div class="d-flex align-items-center gap-2 flex-wrap">
        <span class="badge-soft">Total: {{ reconocimientos|length }}</span>

        {% if request.user.is_authenticated and request.user.is_staff %}
          <a href="{% url 'reconocimiento_create' %}" class="btn btn-dark btn-sm">
            ‚ûï Nuevo Reconocimiento
          </a>
        {% endif %}
      </div>
    </div>
  </div>

  <!-- LISTADO -->
  {% if reconocimientos %}
    <div class="d-grid gap-3">
      {% for r in reconocimientos %}
        <div class="rec-card">

          <!-- Encabezado -->
          <div class="d-flex justify-content-between align-items-start flex-wrap gap-2">
            <div>
              <div class="rec-title">
                {{ r.descripcionreconocimiento|default:"Reconocimiento" }}
              </div>

              <div class="mt-2 d-flex flex-wrap gap-2">
                {% if r.tiporeconocimiento == 'Acad√©mico' %}
                  <span class="badge-soft chip-academico">üéì Acad√©mico</span>
                {% elif r.tiporeconocimiento == 'P√∫blico' %}
                  <span class="badge-soft chip-publico">üèõÔ∏è P√∫blico</span>
                {% elif r.tiporeconocimiento == 'Privado' %}
                  <span class="badge-soft chip-privado">üè¢ Privado</span>
                {% else %}
                  <span class="badge-soft">üè∑Ô∏è {{ r.tiporeconocimiento|default:"Sin tipo" }}</span>
                {% endif %}

                {% if r.fechareconocimiento %}
                  <span class="badge-soft">üìÖ {{ r.fechareconocimiento|date:"d M Y" }}</span>
                {% else %}
                  <span class="badge-soft">üìÖ Sin fecha</span>
                {% endif %}
              </div>
            </div>

            <!-- Certificado + Acciones admin -->
            <div class="d-flex gap-2 flex-wrap justify-content-end">
              {% if r.rutacertificado %}
                <a class="btn btn-outline-secondary btn-sm" href="{{ r.rutacertificado.url }}" target="_blank">
                  üìé Ver certificado
                </a>
              {% else %}
                <span class="badge-soft">Sin archivo</span>
              {% endif %}

              {% if request.user.is_authenticated and request.user.is_staff %}
                <div class="rec-actions d-flex gap-2">
                  <a href="{% url 'reconocimiento_update' r.pk %}" class="btn btn-warning btn-sm">‚úèÔ∏è Editar</a>
                  <a href="{% url 'reconocimiento_delete' r.pk %}" class="btn btn-danger btn-sm">üóëÔ∏è Eliminar</a>
                </div>
              {% endif %}
            </div>
          </div>

          <div class="mini-line"></div>

          <!-- Detalles -->
          <div class="section-title">Entidad patrocinadora</div>
          <div class="text-block">{{ r.entidadpatrocinadora|default:"‚Äî" }}</div>

          <div class="section-title">Contacto</div>
          <div class="text-block">
            {{ r.nombrecontactoauspicia|default:"‚Äî" }}
            {% if r.telefonocontactoauspicia %}
              ¬∑ <a href="tel:{{ r.telefonocontactoauspicia }}" class="text-decoration-none">
                {{ r.telefonocontactoauspicia }}
              </a>
            {% endif %}
          </div>

          {% if request.user.is_authenticated and request.user.is_staff %}
            <div class="text-muted mt-3" style="font-size:.9rem;">
              <strong>ID:</strong> {{ r.idreconocimiento }}
            </div>
          {% endif %}

        </div>
      {% endfor %}
    </div>

  {% else %}
    <div class="alert alert-secondary text-center">
      No hay reconocimientos registrados.
    </div>
  {% endif %}

</div>

{% endblock %}
